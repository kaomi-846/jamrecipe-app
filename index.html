<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”ã‚¢ãƒ—ãƒª</title>
    <style>
      body {
        font-family: "Hiragino Kaku Gothic ProN", sans-serif;
        background-color: #fff0f5;
        color: #333;
        padding: 20px;
      }
      label {
        display: block;
        margin-top: 10px;
        font-weight: bold;
      }
      input,
      select,
      button {
        width: 100%;
        max-width: 400px;
        padding: 8px;
        margin-bottom: 10px;
        font-size: 1em;
      }
      .result {
        background-color: #fff;
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 20px;
        white-space: pre-wrap;
      }
      button {
        background-color: #d63384;
        color: #fff;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #ff85c1;
      }
      .white-box {
        background-color: #fff;
        padding: 15px;
        margin-top: 20px;
        border: 2px solid #d63384;
      }
      .section-title {
        font-weight: bold;
        color: #d63384;
        margin-bottom: 10px;
        font-size: 1.2em;
      }
      @media print {
        body * {
          display: none;
        }
        .print-area {
          display: block !important;
        }
      }
    </style>
  </head>
  <body>
    <h2>ğŸ“ ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”ã‚¢ãƒ—ãƒª</h2>
    <p style="font-size: 0.9em; color: #555">
      åŸææ–™ã¨å¸Œæœ›ç³–åº¦ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¿…è¦ãªç ‚ç³–é‡ã‚„ãƒ¬ã‚·ãƒ”ãŒè‡ªå‹•ã§ç®—å‡ºã•ã‚Œã€ä¸€æ‹¬è¡¨ç¤ºã‚‚ä½œæˆã§ãã¾ã™ã€‚<br />
      â€»pHå€¤ã‚‚ç›®å®‰ã¨ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚
    </p>

    <label>ä¸»åŸææ–™:</label>
    <input
      type="text"
      id="mainIngredient"
      onkeydown="handleEnter(event, 'mainWeight')"
    />

    <label>ä¸»åŸææ–™ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="mainWeight"
      onkeydown="handleEnter(event, 'subIngredient1')"
    />

    <label>å‰¯åŸææ–™1:</label>
    <input
      type="text"
      id="subIngredient1"
      onkeydown="handleEnter(event, 'subWeight1')"
    />

    <label>å‰¯åŸææ–™1ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="subWeight1"
      onkeydown="handleEnter(event, 'subIngredient2')"
    />

    <label>å‰¯åŸææ–™2:</label>
    <input
      type="text"
      id="subIngredient2"
      onkeydown="handleEnter(event, 'subWeight2')"
    />

    <label>å‰¯åŸææ–™2ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="subWeight2"
      onkeydown="handleEnter(event, 'mainSweetener')"
    />

    <label>ãƒ¡ã‚¤ãƒ³ç”˜å‘³æ–™:</label>
    <input
      type="text"
      id="mainSweetener"
      placeholder="ä¾‹ï¼šã‚°ãƒ©ãƒ‹ãƒ¥ãƒ¼ç³–"
      onkeydown="handleEnter(event, 'otherSweetener')"
    />

    <label>ãã®ä»–ã®ç”˜å‘³æ–™:</label>
    <input
      type="text"
      id="otherSweetener"
      placeholder="ä¾‹ï¼šã¯ã¡ã¿ã¤"
      onkeydown="handleEnter(event, 'otherSweetenerWeight')"
    />

    <label>ãã®ä»–ã®ç”˜å‘³æ–™ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="otherSweetenerWeight"
      onkeydown="handleEnter(event, 'spice')"
    />

    <label>ã‚¹ãƒ‘ã‚¤ã‚¹:</label>
    <select id="spice" onkeydown="handleEnter(event, 'spiceLevel')">
      <option value="">ä½¿ç”¨ã—ãªã„</option>
      <option value="ã‚·ãƒŠãƒ¢ãƒ³">ã‚·ãƒŠãƒ¢ãƒ³</option>
      <option value="ã‚¯ãƒ­ãƒ¼ãƒ–">ã‚¯ãƒ­ãƒ¼ãƒ–</option>
      <option value="ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ãƒ‘ã‚¦ãƒ€ãƒ¼">ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ãƒ‘ã‚¦ãƒ€ãƒ¼</option>
      <option value="ãƒ–ãƒ©ãƒƒã‚¯ãƒšãƒƒãƒ‘ãƒ¼">ãƒ–ãƒ©ãƒƒã‚¯ãƒšãƒƒãƒ‘ãƒ¼</option>
      <option value="å”è¾›å­">å”è¾›å­</option>
      <option value="æŠ¹èŒ¶">æŠ¹èŒ¶</option>
      <option value="ç´…èŒ¶è‘‰">ç´…èŒ¶è‘‰</option>
    </select>

    <label>ã‚¹ãƒ‘ã‚¤ã‚¹ã®å¼·ã•:</label>
    <select id="spiceLevel" onkeydown="handleEnter(event, 'pectin')">
      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="ã»ã‚“ã®ã‚Š">ã»ã‚“ã®ã‚Š</option>
      <option value="æ™®é€š">æ™®é€š</option>
      <option value="ã—ã£ã‹ã‚Š">ã—ã£ã‹ã‚Š</option>
    </select>

    <label>ãƒšã‚¯ãƒãƒ³ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="pectin"
      onkeydown="handleEnter(event, 'flavoring')"
    />

    <label>é¦™æ–™:</label>
    <input
      type="text"
      id="flavoring"
      onkeydown="handleEnter(event, 'liquor')"
    />

    <label>æ´‹é…’:</label>
    <input
      type="text"
      id="liquor"
      placeholder="ä¾‹ï¼šãƒ©ãƒ é…’"
      onkeydown="handleEnter(event, 'liquorWeight')"
    />

    <label>æ´‹é…’ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="liquorWeight"
      onkeydown="handleEnter(event, 'jamType')"
    />

    <label>ã‚¸ãƒ£ãƒ ã‚¿ã‚¤ãƒ—:</label>
    <select id="jamType" onkeydown="handleEnter(event, 'targetBrix')">
      <option value="é«˜ç³–åº¦ï¼ˆ65%ä»¥ä¸Šã€å¸¸æ¸©ä¿å­˜å¯ï¼‰">
        é«˜ç³–åº¦ï¼ˆ65%ä»¥ä¸Šã€ç“¶ã”ã¨ç…®æ²¸æ®ºèŒã€å¸¸æ¸©ä¿å­˜å¯ï¼‰
      </option>
      <option value="ä½ç³–åº¦ï¼ˆè¦å†·è”µï¼‰">
        ä½ç³–åº¦ï¼ˆç´ æã®å‘³ã‚’æ´»ã‹ã—ãŸæ§ãˆã‚ãªç”˜ã•ã€‚55ï¼…ç›®å®‰ã€è¦å†·è”µï¼‰
      </option>
      <option value="ã‚³ãƒ³ãƒ•ã‚£ãƒãƒ¥ãƒ¼ãƒ«ï¼ˆè¦å†·è”µï¼‰">
        ã‚³ãƒ³ãƒ•ã‚£ãƒãƒ¥ãƒ¼ãƒ«ï¼ˆæœå®Ÿæ„Ÿã‚’æ®‹ã—ã¤ã¤ã€è‡ªç„¶ãªç”˜ã•ã§é£Ÿã¹ã‚„ã™ã„ã€‚45ï¼…ç›®å®‰ã€è¦å†·è”µï¼‰
      </option>
      <option value="ã‚½ãƒ¼ã‚¹ï¼ˆè¦å†·è”µï¼‰">
        ã‚½ãƒ¼ã‚¹ï¼ˆã‹ã‘ã‚‹ã‚¿ã‚¤ãƒ—ã§ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãªé¢¨å‘³ã‚’æ¥½ã—ã‚ã‚‹ã€‚30ï¼…ç›®å®‰ã€‚è¦å†·è”µï¼‰
      </option>
    </select>

    <label>ç³–åº¦ã®ç›®å®‰ï¼ˆ%ï¼‰ã‚¸ãƒ£ãƒ ã‚¿ã‚¤ãƒ—ã‚’å‚è€ƒã«å…¥åŠ›:</label>
    <input
      type="number"
      id="targetBrix"
      value="65"
      onkeydown="handleEnter(event, 'emptyPot')"
    />

    <button id="generateButton" onclick="generateRecipe()">ãƒ¬ã‚·ãƒ”ã‚’è¡¨ç¤º</button>
    <div class="result print-area" id="recipeOutput"></div>
    <button onclick="printRecipeOnly()">ğŸ–¨ï¸ ãƒ¬ã‚·ãƒ”ã‚’å°åˆ·ã™ã‚‹</button>

    <!-- ä¸€æ‹¬è¡¨ç¤ºç”¨å…¥åŠ›æ  -->
    <div class="white-box">
      <div class="section-title">ğŸ‹ ä¸€æ‹¬è¡¨ç¤ºç”¨ã®è¿½åŠ æƒ…å ±</div>
      <label>ä¸»åŸææ–™ã®åŸç”£åœ°:</label>
      <input
        type="text"
        id="origin"
        onkeydown="handleEnter(event, 'emptyPot')"
      />

      <label>ç©ºé‹ã®é‡é‡ï¼ˆgï¼‰:</label>
      <input
        type="number"
        id="emptyPot"
        onkeydown="handleEnter(event, 'totalWithPot')"
      />

      <label>ç…®è©°ã‚å¾Œã®é‹ï¼‹ã‚¸ãƒ£ãƒ ã®é‡é‡ï¼ˆgï¼‰:</label>
      <input
        type="number"
        id="totalWithPot"
        onkeydown="handleEnter(event, 'displayAmount')"
      />

      <label>è¡¨ç¤ºã—ãŸã„å†…å®¹é‡ï¼ˆgï¼‰:</label>
      <input
        type="number"
        id="displayAmount"
        onkeydown="handleEnter(event, 'generateLabelButton')"
      />
    </div>

    <button id="generateLabelButton" onclick="generateLabel()">
      ä¸€æ‹¬è¡¨ç¤ºã‚’ä½œæˆã™ã‚‹
    </button>
    <div class="result print-area" id="labelOutput"></div>
    <button onclick="printLabelOnly()">ğŸ–¨ï¸ ä¸€æ‹¬è¡¨ç¤ºã‚’å°åˆ·ã™ã‚‹</button>

    <button onclick="toggleGuide()">
      ä¸‹ã”ã—ã‚‰ãˆãƒ»èª¿ç†ã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ã€ãŸãŸã‚€
    </button>

    <div class="result print-area" id="guide" style="display: none"></div>

    <footer style="margin-top: 30px; color: #5a4033; font-size: 0.95em">
      ğŸ“ã“ã®ã‚¢ãƒ—ãƒªã¯ã€ã”å®¶åº­ã§ã®æ‰‹ä½œã‚Šã‚¸ãƒ£ãƒ ã‚„ã€è²©å£²ã‚’ç›®æŒ‡ã™æ–¹ã®è©¦ä½œã®ç›®å®‰ã¨ã—ã¦ã”åˆ©ç”¨ã„ãŸã ãã‚‚ã®ã§ã™ã€‚<br />
      ğŸ“å®Ÿéš›ã«è²©å£²ã™ã‚‹éš›ã«ã¯ã€è£½é€ è¨±å¯ã‚’å—ã‘ãŸæ–½è¨­ã§ä½œæ¥­ã‚’è¡Œã„ã€å¿…è¦ãªåŠ ç†±æ®ºèŒã‚„è¡›ç”Ÿç®¡ç†ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚<br />
      ğŸ“ã¾ãŸã€è²©å£²å‰ã«ã¯å¿…ãšä¿å¥æ‰€ã‚„æ¤œæŸ»æ©Ÿé–¢ã«ç›¸è«‡ã—ã€æ³•å¾‹ã«æ²¿ã£ãŸè¡¨ç¤ºã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚<br />
      ğŸ“æœ¬ã‚¢ãƒ—ãƒªã§ä½œæˆã™ã‚‹å†…å®¹ã¯ã‚ãã¾ã§ç›®å®‰ã§ã‚ã‚Šã€ã”åˆ©ç”¨ã¯ã™ã¹ã¦è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br /><br />
      Printed from ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”ã‚¢ãƒ—ãƒª | Produced by è¾²ç”£å·¥æˆ¿ã‚„ã—ã‚
    </footer>

    <script>
      let globalMainSweetenerWeight = 0;
      let globalJamWeight = 0;

      //<script>
      const ingredientData = {
        ã„ã¡ã”: {
          kcal: 34,
          protein: 0.9,
          fat: 0.1,
          carb: 7.9,
          salt: 0,
          ph: 3.3,
        },
        ã‚Šã‚“ã”: {
          kcal: 54,
          protein: 0.2,
          fat: 0.3,
          carb: 14.1,
          salt: 0,
          ph: 3.6,
        },
        ãƒ¬ãƒ¼ã‚ºãƒ³: {
          kcal: 300,
          protein: 2.5,
          fat: 0.4,
          carb: 79,
          salt: 0,
          ph: 3.8,
        },
        ãƒã‚¿ãƒ¼: {
          kcal: 717,
          protein: 0.9,
          fat: 81,
          carb: 0.1,
          salt: 1.5,
          ph: 6.0,
        },
        ã¯ã¡ã¿ã¤: {
          kcal: 294,
          protein: 0.3,
          fat: 0,
          carb: 79.7,
          salt: 0,
          ph: 3.9,
        },
        ã‚°ãƒ©ãƒ‹ãƒ¥ãƒ¼ç³–: {
          kcal: 387,
          protein: 0,
          fat: 0,
          carb: 99.8,
          salt: 0,
          ph: null,
        },
      };

      function val(id) {
        return document.getElementById(id)?.value || "";
      }

      function generateRecipe() {
        const main = val("mainIngredient");
        const weightMain = Number(val("mainWeight")) || 0;
        const sub1 = val("subIngredient1");
        const weightSub1 = Number(val("subWeight1")) || 0;
        const sub2 = val("subIngredient2");
        const weightSub2 = Number(val("subWeight2")) || 0;
        const otherSweetener = val("otherSweetener");
        const otherSweetenerWeight = Number(val("otherSweetenerWeight")) || 0;
        const mainSweetener = val("mainSweetener");
        const spice = val("spice");
        const spiceLevel = val("spiceLevel");
        const pectin = val("pectin");
        const flavoring = val("flavoring");
        const liquor = val("liquor");
        const liquorWeight = Number(val("liquorWeight")) || 0;
        const jamType = val("jamType");
        const targetBrix = Number(val("targetBrix")) || 65;

        const totalFruitWeight = weightMain + weightSub1 + weightSub2;
        let jamWeight = Math.round(totalFruitWeight * 0.8);
        globalJamWeight = jamWeight;

        const totalSugar = Math.round(jamWeight * (targetBrix / 100));
        let mainSweetenerWeight = totalSugar - otherSweetenerWeight;
        if (mainSweetenerWeight < 0) mainSweetenerWeight = 0;
        globalMainSweetenerWeight = mainSweetenerWeight;

        let phValue =
          ingredientData[main]?.ph !== undefined
            ? ingredientData[main].ph
            : "ä¸æ˜";

        let recipe = `ğŸ“ ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”\n`;
        recipe += `ä¸»åŸææ–™ï¼š${main} ${weightMain}gï¼ˆpH: ${phValue}ï¼‰\n`;
        if (sub1) recipe += `å‰¯åŸææ–™1ï¼š${sub1} ${weightSub1}g\n`;
        if (sub2) recipe += `å‰¯åŸææ–™2ï¼š${sub2} ${weightSub2}g\n`;
        if (otherSweetener)
          recipe += `ãã®ä»–ç”˜å‘³æ–™ï¼š${otherSweetener} ${otherSweetenerWeight}g\n`;
        recipe += `ãƒ¡ã‚¤ãƒ³ç”˜å‘³æ–™ï¼ˆæ¨å®šï¼‰ï¼š${mainSweetener} ç´„${mainSweetenerWeight}g\n`;
        if (spice) recipe += `ã‚¹ãƒ‘ã‚¤ã‚¹ï¼š${spice}ï¼ˆ${spiceLevel}ï¼‰\n`;
        if (pectin) recipe += `ãƒšã‚¯ãƒãƒ³ï¼š${pectin}g\n`;
        if (flavoring) recipe += `é¦™æ–™ï¼š${flavoring}\n`;
        if (liquor) recipe += `æ´‹é…’ï¼š${liquor} ${liquorWeight}g\n`;
        recipe += `ç…®è©°ã‚å¾Œã®å®Œæˆé‡é‡ï¼šç´„${jamWeight}g\n`;
        recipe += `ç›®æ¨™ç³–åº¦ï¼š${targetBrix}%\n`;

        document.getElementById("recipeOutput").innerText = recipe;
      }

      function generateLabel() {
        const main = val("mainIngredient");
        const origin = val("origin") || "å›½ç”£";
        const weightMain = Number(val("mainWeight")) || 0;
        const sub1 = val("subIngredient1");
        const weightSub1 = Number(val("subWeight1")) || 0;
        const sub2 = val("subIngredient2");
        const weightSub2 = Number(val("subWeight2")) || 0;
        const mainSweetener = val("mainSweetener");
        const otherSweetener = val("otherSweetener");
        const otherSweetenerWeight = Number(val("otherSweetenerWeight")) || 0;
        const spice = val("spice");
        const liquor = val("liquor");
        const liquorWeight = Number(val("liquorWeight")) || 0;
        const pectin = val("pectin");
        const flavoring = val("flavoring");
        const jamType = val("jamType");
        const displayAmount = Number(val("displayAmount")) || 100;

        let ingredientsArray = [];

        if (main)
          ingredientsArray.push({
            name: `${main}ï¼ˆ${origin}ï¼‰`,
            weight: weightMain,
          });
        if (mainSweetener)
          ingredientsArray.push({
            name: mainSweetener,
            weight: globalMainSweetenerWeight,
          });
        if (sub1) ingredientsArray.push({ name: sub1, weight: weightSub1 });
        if (sub2) ingredientsArray.push({ name: sub2, weight: weightSub2 });
        if (otherSweetener)
          ingredientsArray.push({
            name: otherSweetener,
            weight: otherSweetenerWeight,
          });
        if (liquor)
          ingredientsArray.push({ name: liquor, weight: liquorWeight });
        if (spice) ingredientsArray.push({ name: spice, weight: 0 });

        ingredientsArray.sort((a, b) => b.weight - a.weight);

        let ingredientsStr = ingredientsArray
          .map((item) => {
            if (item.name === "ãƒã‚¿ãƒ¼") return "ãƒã‚¿ãƒ¼ï¼ˆä¹³æˆåˆ†ã‚’å«ã‚€ï¼‰";
            return item.name;
          })
          .join("ã€");

        let additives = [];
        if (pectin) additives.push("ãƒšã‚¯ãƒãƒ³");
        if (flavoring) additives.push("é¦™æ–™");
        let fullLabel = ingredientsStr;
        if (additives.length > 0) {
          fullLabel += " / " + additives.join("ã€");
        }

        let total = { kcal: 0, protein: 0, fat: 0, carb: 0, salt: 0 };
        const allIngredients = [
          { name: main, weight: weightMain },
          { name: sub1, weight: weightSub1 },
          { name: sub2, weight: weightSub2 },
          { name: mainSweetener, weight: globalMainSweetenerWeight },
          { name: otherSweetener, weight: otherSweetenerWeight },
        ];

        let totalWeight = 0;
        for (const ing of allIngredients) {
          if (!ing.name || ing.weight === 0) continue;
          const data = ingredientData[ing.name];
          if (data) {
            total.kcal += (data.kcal * ing.weight) / 100;
            total.protein += (data.protein * ing.weight) / 100;
            total.fat += (data.fat * ing.weight) / 100;
            total.carb += (data.carb * ing.weight) / 100;
            total.salt += (data.salt * ing.weight) / 100;
            totalWeight += ing.weight;
          }
        }

        let per100g = {
          kcal:
            totalWeight > 0
              ? ((total.kcal * 100) / totalWeight).toFixed(1)
              : "0.0",
          protein:
            totalWeight > 0
              ? ((total.protein * 100) / totalWeight).toFixed(1)
              : "0.0",
          fat:
            totalWeight > 0
              ? ((total.fat * 100) / totalWeight).toFixed(1)
              : "0.0",
          carb:
            totalWeight > 0
              ? ((total.carb * 100) / totalWeight).toFixed(1)
              : "0.0",
          salt:
            totalWeight > 0
              ? ((total.salt * 100) / totalWeight).toFixed(1)
              : "0.0",
        };

        let storageText = jamType.includes("é«˜ç³–åº¦")
          ? "ç›´å°„æ—¥å…‰é«˜æ¸©å¤šæ¹¿ã‚’é¿ã‘å¸¸æ¸©ä¿å­˜ã€‚é–‹å°å¾Œã¯è¦å†·è”µ10â„ƒä»¥ä¸‹ã€‚"
          : "è¦å†·è”µï¼ˆ10â„ƒä»¥ä¸‹ï¼‰ã€‚é–‹å°å¾Œã¯ãŠæ—©ã‚ã«ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ã€‚";

        let label = `<h3>ğŸ“ ä¸€æ‹¬è¡¨ç¤ºãƒ©ãƒ™ãƒ«</h3>`;
        label += `<p>åç§°ï¼š${main}ã‚¸ãƒ£ãƒ </p>`;
        label += `<p>åŸææ–™åï¼š${fullLabel}</p>`;
        label += `<p>å†…å®¹é‡ï¼š${displayAmount}g</p>`;
        label += `<p>è³å‘³æœŸé™ï¼šå„è‡ªè¨˜å…¥</p>`;
        label += `<p>ä¿å­˜æ–¹æ³•ï¼š${storageText}</p>`;
        label += `<p>è£½é€ è€…ï¼šå„è‡ªè¨˜å…¥</p>`;
        label += `<p>æ „é¤Šæˆåˆ†è¡¨ç¤ºï¼ˆ${displayAmount}gå½“ãŸã‚Š æ¨å®šå€¤ï¼‰ï¼š</p>`;
        label += `<p>ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼š${per100g.kcal} kcal</p>`;
        label += `<p>ãŸã‚“ã±ãè³ªï¼š${per100g.protein} g</p>`;
        label += `<p>è„‚è³ªï¼š${per100g.fat} g</p>`;
        label += `<p>ç‚­æ°´åŒ–ç‰©ï¼š${per100g.carb} g</p>`;
        label += `<p>é£Ÿå¡©ç›¸å½“é‡ï¼š${per100g.salt} g</p>`;
        label += `<p><strong>ã€ˆæ¨å®šå€¤ã€‰</strong></p>`;

        if (fullLabel.includes("ã¯ã¡ã¿ã¤")) {
          label += `<p style="color:red;">â€»ã¯ã¡ã¿ã¤ã¯ã€1æ­³æœªæº€ã®ä¹³å…ã«ã¯ä¸ãˆãªã„ã§ãã ã•ã„ã€‚</p>`;
        }
        if (fullLabel.includes("ãƒã‚¿ãƒ¼")) {
          label += `<p style="color:red;">â€»æœ¬å“ã«ã¯ä¹³æˆåˆ†ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>`;
        }
        if (fullLabel.includes("ã‚¯ãƒ«ãƒŸ")) {
          label += `<p style="color:red;">â€»æœ¬å“ã«ã¯ã‚¯ãƒ«ãƒŸãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>`;
        }

        label += `<hr><p style="color:#5a4033; font-size:0.9em;">
            ğŸ“åŸææ–™ã¨å¸Œæœ›ç³–åº¦ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¿…è¦ãªç ‚ç³–ã®é‡ã®ç›®å®‰ã‚„ãƒ¬ã‚·ãƒ”ãŒè‡ªå‹•ã§ç®—å‡ºã•ã‚Œã€ä¸€æ‹¬è¡¨ç¤ºã‚‚ä½œæˆã§ãã‚‹ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>
            ğŸ“æœ¬ã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã—ãŸéš›ã«ç”Ÿã˜ãŸãƒˆãƒ©ãƒ–ãƒ«ã‚„äº‹æ•…ã«ã¤ã„ã¦ã€è£½ä½œè€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚<br>
            ğŸ“è²©å£²ã‚’äºˆå®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€å¿…ãšä¿å¥æ‰€ã‚„é–¢ä¿‚æ©Ÿé–¢ã«ç›¸è«‡ã—ã€æ³•ä»¤ã«åŸºã¥ãè¡¨ç¤ºã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</p>`;

        document.getElementById("labelOutput").innerHTML = label;
      }

      function toggleGuide() {
        const g = document.getElementById("guide");
        g.style.display = g.style.display === "none" ? "block" : "none";
        if (g.innerText === "") {
          g.innerText = `ğŸ½ ä¸‹ã”ã—ã‚‰ãˆãƒ»èª¿ç†ã®ãƒ’ãƒ³ãƒˆï¼š
      - é‹ã¯ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹ãŒãŠã™ã™ã‚ã€‚ãƒ›ãƒ¼ãƒ­ãƒ¼ã¯æ¬ ã‘ãŒãªã„ã‚‚ã®ã‚’ã€‚
      - ç´ æã®ç†Ÿã—å…·åˆã«ã‚ˆã£ã¦ä¸‹ã”ã—ã‚‰ãˆã‚’å·¥å¤«ã—ã¦ãã ã•ã„ã€‚
      - ã‚­ã‚¦ã‚¤ï¼šåŠåˆ†ã«åˆ‡ã£ã¦ã‚¹ãƒ—ãƒ¼ãƒ³ã§ä¸­èº«ã‚’ãã‚ŠæŠœã
      - ã„ã¡ã”ï¼šã‚«ãƒƒãƒˆã¾ãŸã¯æ½°ã™ã€‚ç ‚ç³–ã‚’ã¾ã¶ã—æ°´åˆ†ã‚’å‡ºã—ã¦ã‹ã‚‰ç…®è¾¼ã‚€ã¨è‰¯ã„ã€‚
      - ãƒŠã‚¹ï¼šçš®ã‚’ã‚€ã„ã¦ã‚¢ã‚¯æŠœãã€‚çš®ã‚’ç…®å‡ºã—ãŸç´«æ°´ã§è‰²ã‚’å‡ºã—ã€ã‚Šã‚“ã”ã¨ç…®ã‚‹ã€‚ãƒ¬ãƒ¢ãƒ³ã§è‰²è‰¯ãã€‚
      - ãƒ¬ãƒ¢ãƒ³æœæ±ã‚„ã‚¹ãƒ‘ã‚¤ã‚¹ã¯å¾ŒåŠã«åŠ ãˆã‚‹ã¨é¦™ã‚ŠãŒæ®‹ã‚Šã¾ã™ã€‚
      - ã¯ã¡ã¿ã¤ã‚’ä½¿ç”¨ã—ãŸå ´åˆã¯ã€1æ­³æœªæº€ã®ä¹³å¹¼å…ã«ã¯é£Ÿã¹ã•ã›ãªã„ã§ãã ã•ã„ã€‚
      ğŸ«™ åŠ ç†±æ®ºèŒã«ã¤ã„ã¦ï¼š
      - é«˜ç³–åº¦ï¼ˆç³–åº¦65%ä»¥ä¸Šï¼‰ã®ã‚¸ãƒ£ãƒ ã¯ç“¶è©°å¾Œã«ç…®æ²¸åŠ ç†±æ®ºèŒå¯èƒ½ã€‚
      - ã‚¸ãƒ£ãƒ ã®ä¸­å¿ƒæ¸©åº¦ãŒ85â„ƒã§30åˆ†åŠ ç†±ã§é•·æœŸä¿å­˜ãŒå¯èƒ½ã€‚
      - åŠ ç†±ã¯ç“¶è©°å¾Œã€é‹ã§ç…®ã¦åŠ ç†±ã—ã¾ã™ã€‚
      - è‡ªç„¶å†·å´å¾Œã€è“‹ã®çœŸã‚“ä¸­ãŒã¸ã“ã‚“ã§ã„ã‚Œã°å¯†å°æˆåŠŸã§ã™ã€‚`;
        }
      }

      function printRecipeOnly() {
        const c = document.getElementById("recipeOutput").outerHTML;
        const w = window.open();
        w.document.write(c);
        w.print();
        w.close();
      }

      function printLabelOnly() {
        const l = document.getElementById("labelOutput").outerHTML;
        const w = window.open();
        w.document.write(l);
        w.print();
        w.close();
      }

      function handleEnter(event, nextId) {
        if (event.key === "Enter") {
          event.preventDefault();
          const next = document.getElementById(nextId);
          if (next) next.focus();
        }
      }
    </script>
  </body>
</html>
